<div fxFlex fxLayout="row">

    <div fxFlex="400px" class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center">
            <img src="assets/images/logo-blanc.svg" style="max-width:100%;height:30px;" />
            <div fxFlex></div>
            <button mat-icon-button (click)="edit = !edit">
                <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="primary" (click)="update()" *ngIf="edit">
                <mat-icon>save</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="confirmDelete()">
                <mat-icon>delete_forever</mat-icon>
            </button>
        </mat-toolbar>

        <div class="scrollable" fxFlex>
            <div fxLayout="column" class="padding-top" fxLayoutAlign="start stretch">

                <div class="innerSpacing" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
                    <mat-slide-toggle [disabled]="!edit"
                                      matTooltipPosition="after"
                                      matTooltip="Afficher pour les utilisateurs déconnectés"
                                      [(ngModel)]="data.isPublic"
                    >Public
                    </mat-slide-toggle>

                    <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                        <mat-slider fxFlex
                                    [disabled]="!edit"
                                    [min]="1"
                                    [max]="3"
                                    [ngModel]="status"
                                    (input)="updateStatus($event);status = $event.value"
                                    [color]="statuses[status].color"
                        ></mat-slider>
                        <span>{{ statuses[status].text }}</span>
                    </div>
                </div>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.name"
                           placeholder="Titre"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.expandedName"
                           placeholder="Titre étendu"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <!-- Artistes, todo componentize (compact relation) ? -->
                <div fxLayout="column" class="padding-v">
                    <div class="innerSpacing" fxLayout="column">
                        <div class="mat-subheading-2 no-margin-bottom">Artistes</div>
                        <div *ngFor="let artist of data.artists"
                             fxLayout="row"
                             fxLayoutAlign="start center"
                             class="mat-body-1"
                             style="position:relative;"
                        >
                            <div fxFlex style="height:2.5em;line-height:2.5em">{{ artist.name }}</div>
                            <button mat-icon-button color="warn" *ngIf="edit" style="position:absolute;right:-10px;">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </div>
                    </div>
                    <mat-form-field class="innerSpacing" fxFlex *ngIf="edit">
                        <input matInput [(ngModel)]="newArtist" placeholder="Ajouter un artiste" >
                        <button mat-icon-button matSuffix>
                            <mat-icon>add</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.addition"
                           placeholder="Supplément"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.technique" placeholder="Technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.techniqueAuthor" placeholder="Auteur technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.dating"
                           placeholder="Datation"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.material"
                           placeholder="Matériel"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.institution"
                           placeholder="Institution"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.literature"
                           placeholder="Source"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.page" placeholder="Page" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.figure" placeholder="Figure" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.table" placeholder="Planche" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.isbn"
                           placeholder="ISBN"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="10px" class="padding" *ngIf="edit">
                    <button mat-button (click)="update()">Soumettre</button>
                    <button mat-raised-button color="primary" (click)="update()">Sauver</button>
                </div>

            </div>
        </div>
    </div>

    <div fxFlex class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center"></mat-toolbar>
        <div class="image" fxFlex [ngStyle]="{'background-image': 'url(' + imageSrc + ')'}"
        ></div>
    </div>

</div>
