<div fxFlex fxLayout="row">

    <div fxFlex="400px" class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center">
            <img src="assets/images/logo-blanc.svg" style="max-width:100%;height:30px;" />
            <div fxFlex></div>
            <button mat-icon-button color="primary" (click)="update()" *ngIf="edit" matTooltip="Enregistrer">
                <mat-icon>save</mat-icon>
            </button>
            <button mat-icon-button (click)="edit = !edit" [matTooltip]="'Passer en mode édition'">
                <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="confirmDelete()" matTooltip="Supprimer">
                <mat-icon>delete_forever</mat-icon>
            </button>
        </mat-toolbar>

        <perfect-scrollbar fxFlex>
            <div fxLayout="column" class="padding-top scrolled" fxLayoutAlign="start stretch">

                <div class="innerSpacing" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
                    <mat-slide-toggle [disabled]="!edit"
                                      matTooltipPosition="after"
                                      matTooltip="Afficher pour les utilisateurs déconnectés"
                                      [(ngModel)]="data.isPublic"
                    >Public
                    </mat-slide-toggle>

                    <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                        <mat-slider fxFlex
                                    [disabled]="!edit"
                                    [min]="1"
                                    [max]="3"
                                    [ngModel]="status"
                                    (input)="updateStatus($event);status = $event.value"
                                    [color]="statuses[status].color"
                        ></mat-slider>
                        <span>{{ statuses[status].text }}</span>
                    </div>
                </div>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.name"
                           placeholder="Titre"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.expandedName"
                           placeholder="Titre étendu"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <app-thesaurus [readonly]="!edit"
                               [service]="artistService"
                               placeholder="Artistes"
                               [model]="data.artists"
                               (modelChange)="data.artists = $event"
                               [previewComponent]="artistComponent"
                ></app-thesaurus>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.addition"
                           placeholder="Supplément"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.technique" placeholder="Technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.techniqueAuthor" placeholder="Auteur technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.dating"
                           placeholder="Datation"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.material"
                           placeholder="Matériel"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.literature"
                           placeholder="Source"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.page" placeholder="Page" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.figure" placeholder="Figure" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="data.table" placeholder="Planche" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="data.isbn"
                           placeholder="ISBN"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <div class="mat-title innerSpacing">Lieu</div>

                <app-thesaurus [readonly]="!edit"
                               [service]="institutionSvc"
                               placeholder="Institution"
                               [model]="data.institution"
                               (modelChange)="data.institution = $event"
                               [multiple]="false"
                               [previewComponent]="institutionComponent"
                ></app-thesaurus>

                <app-address [(model)]="data" [vertical]="true" [readonly]="!edit"></app-address>
            </div>

        </perfect-scrollbar>

        <div class="padding mat-elevation-z4">
            <app-stamp [item]="data"></app-stamp>
        </div>

    </div>

    <div fxFlex class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center"></mat-toolbar>
        <div class="image" fxFlex [ngStyle]="{'background-image': 'url(' + imageSrc + ')'}"></div>
    </div>

</div>
