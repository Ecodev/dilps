<mat-form-field class="innerSpacing">

    <mat-chip-list #chipList aria-orientation="vertical" class="mat-chip-list-stacked">
        <mat-chip *ngFor="let item of items"
                  [removable]="!readonly"
                  (remove)="removeTerm(item)"
                  fxLayoutRow="row"
                  fxLayoutGap="10px"
        >
            <mat-icon *ngIf="previewComponent" class="mat-chip-remove" (click)="openItem(item)">remove_red_eye</mat-icon>
            <span fxFlex>{{ item.name }}</span>
            <mat-icon matChipRemove *ngIf="!readonly">cancel</mat-icon>
        </mat-chip>
        <input #input
               [fxShow]="!readonly || items.length === 0"
               [readonly]="readonly"
               [formControl]="formCtrl"
               [placeholder]="placeholder"
               [matChipInputFor]="chipList"
               [matAutocomplete]="autocomplete"
               (ngModelChange)="onSearch($event)"
               (focus)="startSearch()"
               (keydown.enter)="onEnter($event)"
        />
    </mat-chip-list>

    <!-- Autocomplete menu -->
    <mat-autocomplete #autocomplete="matAutocomplete" (optionSelected)="selectSuggestion($event)">
        <mat-option *ngFor="let item of suggestionsObs | async" [value]="item">{{ item.name }}</mat-option>
        <div style="padding:5px 10px" class="mat-caption" *ngIf="moreNbItems > 0" i18n>{{ moreNbItems }} élément(s) supplémentaire(s)</div>
    </mat-autocomplete>

</mat-form-field>
