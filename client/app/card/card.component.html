<div fxFlex fxLayout="row" *ngIf="model">

    <div fxFlex="400px" class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center">
            <img *ngIf="showLogo" src="assets/images/logo-blanc.svg" style="max-width:100%;height:30px;" />

            <div *ngIf="title" class="mat-diplay-1">{{ title }}</div>

            <div fxFlex></div>

            <mat-menu #changeMenu="matMenu" [overlapTrigger]="false">
                <button mat-menu-item (click)="suggestUpdate()">Suggérer une modification</button>
                <button mat-menu-item (click)="suggestDeletion()">Suggérer la suppression</button>
            </mat-menu>

            <button mat-icon-button [matMenuTriggerFor]="changeMenu" matTooltip="Signaler un changement">
                <mat-icon>add_alert</mat-icon>
            </button>

            <button mat-icon-button color="primary" (click)="update()" *ngIf="edit" matTooltip="Enregistrer">
                <mat-icon>save</mat-icon>
            </button>
            <button mat-icon-button (click)="edit = !edit" [matTooltip]="'Passer en mode édition'">
                <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="confirmDelete()" matTooltip="Supprimer">
                <mat-icon>delete_forever</mat-icon>
            </button>
        </mat-toolbar>

        <perfect-scrollbar fxFlex>
            <div fxLayout="column" class="padding-top scrolled" fxLayoutAlign="start stretch">

                <div class="innerSpacing" fxLayout="column">
                    <div fxLayout="row">Visible {{ statuses[status].text }}</div>
                    <mat-slider [disabled]="!edit"
                                [min]="1"
                                [max]="3"
                                [ngModel]="status"
                                (input)="updateStatus($event);status = $event.value"
                                [color]="statuses[status].color"
                    ></mat-slider>
                </div>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.name"
                           placeholder="Titre"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.expandedName"
                           placeholder="Titre étendu"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <app-thesaurus [readonly]="!edit"
                               [service]="artistService"
                               placeholder="Artistes"
                               [model]="model.artists"
                               (modelChange)="model.artists = $event"
                               [previewComponent]="artistComponent"
                ></app-thesaurus>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.addition"
                           placeholder="Supplément"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="model.technique" placeholder="Technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="model.techniqueAuthor" placeholder="Auteur technique" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.dating"
                           placeholder="Datation"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.material"
                           placeholder="Matériel"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.literature"
                           placeholder="Source"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="model.page" placeholder="Page" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="model.figure" placeholder="Figure" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit" matInput [(ngModel)]="model.table" placeholder="Planche" >
                </mat-form-field>

                <mat-form-field class="innerSpacing">
                    <input [readonly]="!edit"
                           matInput
                           [(ngModel)]="model.isbn"
                           placeholder="ISBN"
                           matTooltipPosition="after"
                           [matTooltip]="!edit ? '' : 'Maecenas sed diam eget risus varius blandit sit amet non magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla.'"
                    >
                </mat-form-field>

                <div class="mat-title innerSpacing">Lieu</div>

                <app-thesaurus [readonly]="!edit"
                               [service]="institutionSvc"
                               placeholder="Institution"
                               [model]="model.institution"
                               (modelChange)="model.institution = $event"
                               [multiple]="false"
                               [previewComponent]="institutionComponent"
                ></app-thesaurus>

                <app-address [(model)]="model" [vertical]="true" [readonly]="!edit"></app-address>
            </div>

        </perfect-scrollbar>

        <div class="padding mat-elevation-z4">
            <app-stamp [item]="model"></app-stamp>
        </div>

    </div>

    <div fxFlex class="containerWithToolbar" fxLayout="column">
        <mat-toolbar fxFlex="none" color="app" fxLayout="row" fxLayoutAlign="start center"></mat-toolbar>
        <div class="image" fxFlex [ngStyle]="{'background-image': 'url(' + imageSrc + ')'}"></div>
    </div>

</div>
